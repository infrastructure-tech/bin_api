{
  "clear_build_path" : true,
  "next": [
    {
      "clear_build_path" : false,
      "build" : "cpp",
      "copy" : [
        {"../../inc/" : "inc/"},
        {"../../src/" : "src/"}
      ],
      "config" : {
        "file_name" : "entrypoint",
        "cpp_version" : 17,
        "libs_shared": [
          "restbed",
          "cpr"
        ],
        "next" : [
          {
            "build": "docker",
            "run_when" : [
              "release"
            ],
            "path" : "srv_infrastructure",
            "copy" : [
              {"out/" : "src/"}
            ],
            "config" : {
              "base_image" : "eons/img_webserver",
              "image_name" : "eons/srv_infrastructure",
              "image_os" : "debian",
              "entrypoint" : "/usr/local/bin/entrypoint",
              "also" : [
                "EXPOSE 80"
              ],
              "tags" : [
                "latest"
              ]
            }
          }
        ]
      }
    }
  ]
}
